@if (playerService.currentPlaylist().length !== 0) {
<div class="m-4 p-2 z-20 bg-gray-100 w-48 rounded-lg relative">
  @if (playerService.currentSong()) {
  <img
    src="{{ playerService.currentSong()?.imgUrl }}"
    class="aspect-square rounded-lg object-cover"
    alt="current song cover art"
  />
  <p class="w-full text-center text-nowrap overflow-hidden">
    {{ playerService.currentSong()?.title }}
  </p>
  <div class="w-full flex justify-evenly py-2">
    <button
      (click)="togglePlaylistVisibility()"
      class="bg-opacity-15 bg-black p-1 flex rounded-lg duration-300 hover:bg-white hover:shadow-sm"
    >
      <span class="material-symbols-outlined"> queue_music </span>
    </button>
    <button
      (click)="previousSong()"
      class="p-1 hover:bg-black hover:bg-opacity-30 rounded-lg flex duration-300"
    >
      <span class="material-symbols-outlined"> navigate_before </span>
    </button>
    <button
      (click)="toggleSongPlaying()"
      class="p-1 bg-black bg-opacity-15 hover:bg-opacity-30 rounded-lg flex duration-300"
    >
      @if (playerService.audioPlayer.paused) {
      <span class="material-symbols-outlined"> play_arrow </span>
      }@else {
      <span class="material-symbols-outlined"> pause </span>
      }</button
    ><button
      (click)="nextSong()"
      class="p-1 hover:bg-black hover:bg-opacity-30 rounded-lg flex duration-300"
    >
      <span class="material-symbols-outlined"> navigate_next </span>
    </button>
  </div>
  }
  <ul
    #playlistQueue
    class="flex w-64 flex-col hidden absolute top-0 -left-2 -translate-x-full bg-gray-100 p-2 rounded-lg h-full overflow-y-auto"
  >
    <!-- <span class="grid grid-cols-1 w-full overflow-x-hidden h-fit"> -->
    @for (song of currentPlaylist; track $index) {
    <li class="w-full flex">
      <button
        #playlistItem
        (click)="setAndplaySong(song)"
        class="text-start text-nowrap flex-grow overflow-hidden p-1 my-0.5 bg-opacity-15 flex flex-row duration-300 hover:bg-white hover:shadow-sm rounded-lg"
        [class]="{ 'bg-black': song.id === playerService.currentSong()?.id }"
      >
        <img
          src="{{ song.imgUrl }}"
          alt="cover art for {{ song.title }}"
          class="w-10 rounded-lg aspect-square"
        />
        <span class="ml-2">
          <p class="overflow-hidden">{{ song.title }}</p>
          <p class="text-sm -mt-1 overflow-hidden">
            {{ song.author.username }}
          </p>
        </span>
      </button>
    </li>
    }
  </ul>
  <!-- </span> -->
</div>
}
